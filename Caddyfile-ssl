# SSL-aktivierte Caddy-Konfiguration f√ºr beide Apps
{
    # Automatische HTTPS aktiviert (Let's Encrypt)
    email basti@basti-reh.de
}

# Hauptdomain mit HTTPS
app.basti-reh.de {
    # Root-Redirect zu Ball Detection
    redir / /ball-detection/ 302
    
    # Ball Detection Labeler
    handle /ball-detection/* {
        reverse_proxy tt-ball-labeler:8000
    }
    
    # Ball Analyzer
    handle /ball-analyzer/* {
        reverse_proxy tt-ball-analyzer:8001
    }
    
    # Admin Panel - Redirect old double path
    redir /admin/admin/* /admin/{path}
    
    # Admin Panel
    handle_path /admin/* {
        reverse_proxy tt-ball-admin:8002
    }
    
    # Fallback
    respond "üèì TT Ball Detection & Analysis Platform (HTTPS)" 200
}

# HTTP zu HTTPS Redirect (automatisch von Caddy)
# Caddy leitet automatisch HTTP-Traffic zu HTTPS um
