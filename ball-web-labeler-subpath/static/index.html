<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TT Ball Label</title>
  <script defer src="static/main.js"></script>
  <style>
    :root { --bg:#0f172a; --card:#111827; --muted:#94a3b8; --accent:#22d3ee; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system; background:var(--bg); color:#e5e7eb; }
    .wrap { max-width:1100px; margin:24px auto; padding:0 16px; }
    .card { background:var(--card); border:1px solid #1f2937; border-radius:14px; padding:16px; }
    .row { display:flex; gap:16px; align-items:center; flex-wrap:wrap; }
    .btn { background:#1f2937; border:1px solid #374151; padding:14px 18px; border-radius:12px; color:#e5e7eb; cursor:pointer; font-size:16px; }
    .btn:hover { background:#111827; }
    .drop { border:2px dashed #374151; border-radius:12px; padding:18px; text-align:center; }
    #imgBox { position:relative; display:inline-block; max-width:100%; touch-action: manipulation; }
    #frameImg { max-width:100%; border-radius:10px; display:block; }
    #crosshair { position:absolute; border:2px solid #10b981; border-radius:50%; width:24px; height:24px; pointer-events:none; transform: translate(-50%, -50%); display:none; }
    .toolbar { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .toolbar input { height:44px; font-size:16px; }
    input[type="file"] { height:44px; }
    .muted { color: var(--muted); font-size:14px; }
    @media (max-width: 640px) {
      .row { gap:10px; }
      .btn { width:100%; }
      #crosshair { width:28px; height:28px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üèì TT Ball Labeler <span class="muted">(YouTube & Upload)</span></h1>

    <div class="card" id="ingestCard">
      <div class="row">
        <div class="drop" id="dropZone" style="flex:1; min-width:260px;">
          <div><strong>Drag & Drop</strong> Video hierher oder Datei w√§hlen</div>
          <input id="file-input" type="file" accept="video/*">
          <div style="margin-top:8px;" class="muted">Optional FPS: <input id="fps-input" type="number" value="5" min="1" step="1"> | Task-Name: <input id="task-name-input" type="text" placeholder="optional">
          </div>
          <button class="btn" id="btn-upload" type="button">Hochladen & Frames extrahieren</button>
        </div>
        <div style="flex:1; min-width:260px;">
          <div><strong>Oder YouTube-URL</strong></div>
          <input id="ytUrl" type="url" placeholder="https://www.youtube.com/watch?v=..." style="width:100%; padding:12px; border-radius:8px; border:1px solid #374151; background:#0b1220; color:#e5e7eb;" />
          <div style="margin-top:8px;" class="muted">FPS: <input id="fpsYT" type="number" value="5" step="0.5" style="width:90px;"> | Task-Name: <input id="nameYT" type="text" placeholder="optional"></div>
          <button class="btn" id="ytBtn">Ingest YouTube & Frames extrahieren</button>
        </div>
      </div>
      <div class="muted" id="ingestStatus" style="margin-top:8px;">Bereit.</div>
    </div>

    <base href="/ball-detection/" />
    <script src="static/main.js"></script>

    <div class="card" id="labelCard" style="margin-top:16px; display:none;">
      <div class="row" style="justify-content:space-between;">
        <div>
          <strong>Task:</strong> <span id="taskId"></span>
          <span class="muted">| Frames: <span id="frameCount">0</span></span>
        </div>
        <div class="toolbar">
          <label>Box (px): <input type="number" id="boxSize" value="24" min="6" max="64" step="2" style="width:90px;"></label>
          <button class="btn" id="exportBtn">Export ZIP</button>
        </div>
      </div>

      <div id="imgBox" style="margin-top:12px;">
        <img id="frameImg" src="" alt="frame" />
        <div id="crosshair"></div>
      </div>
      <div class="row" style="margin-top:8px;">
        <button class="btn" id="prevBtn">‚óÄ Zur√ºck (A)</button>
        <button class="btn" id="skipBtn">‚è≠Ô∏è Skip (S)</button>
        <button class="btn" id="nextBtn">Weiter (D) ‚ñ∂</button>
        <div class="muted">Tippen/Klick in das Bild setzt die Ball-Mitte & speichert</div>
      </div>
      <div class="muted" id="labelStatus" style="margin-top:6px;">‚Äì</div>
    </div>
  </div>
</body>
</html>
